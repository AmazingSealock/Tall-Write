<!doctype html>
<html>
<head>
    <title>ETalker</title>
    <meta name="viewport" content="width=device-width, minimum-scale=0.5, maximum-scale=5, user-scalable=no">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8"/>
    <script type="text/javascript" charset="utf-8" src="../ueditor.config.js"></script>
    <script type="text/javascript" charset="utf-8" src="editor_api.js"></script>
    <script type="text/javascript" charset="utf-8" src="../lang/zh-cn/zh-cn.js?{timestamp}"></script>
    <script src="./../plugins/demo/demo.js"></script>
    <script>
        // window.UEDITOR_CONFIG.toolbars[0].push('undo');
    </script>
    <!-- KaTeX 核心文件 -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css">
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js"></script>
    <style>
        .demo-editor-page {
            padding: 20px;
            max-width: 1200px;
            margin: 0 auto;
            min-height: 100vh; /* 确保父容器至少占满整个视口高度 */
        }
        #editor {
            height: 1200; /* 调整为更小的高度 */
            width: 100%;   /* 编辑器宽度 */
            border: 1px solid #ddd;
            border-radius: 4px;
            overflow-y: auto; /* 垂直滚动条 */
            word-wrap: break-word; /* 允许长单词换行 */
            white-space: pre-wrap; /* 保留空白符，但允许换行 */
        }
        #btns {
            margin-top: 20px; /* 确保按钮与编辑器之间有足够的间距 */
            display: block;   /* 确保按钮是可见的 */
        }
    </style>

    <!-- <script>var _hmt = _hmt || [];
    (function () {
        var hm = document.createElement("script");
        hm.src = "https://hm.baidu.com/hm.js?f84f35a44b5cc5c0b10c3fabdf0f322b";
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(hm, s);
    })();</script> -->

    <!-- <style>
        :root {
            /*--ueditor-top-offset: 20px;*/
        }
    </style> -->
    <link rel="stylesheet" href="./style.css"/>
</head>
<body class="demo-editor-page">
<div>
    <h1>在此处编辑文本</h1>
    <div>
        <script id="editor" type="text/plain" style="height:700px; width:100%;">

        </script>
    </div>
    <div id="btns">
        <div>

            <button onclick="alert(UE.getEditor('editor').getAllHtml())">获得整个html的内容</button>
            <button onclick="alert(UE.getEditor('editor').getContent())">获得内容</button>
            <button onclick="UE.getEditor('editor').setContent('<p>欢迎使用 UEditorPlus</p>', false)">写入内容</button>
            <button onclick="UE.getEditor('editor').setContent('<p>欢迎使用 UEditorPlus</p>', true)">追加内容</button>
            <button onclick="alert(UE.getEditor('editor').getContentTxt())">获得纯文本</button>
            <button onclick="alert(UE.getEditor('editor').getPlainTxt())">获得带格式的纯文本</button>
            <button onclick="alert(UE.getEditor('editor').hasContents())">判断是否有内容</button>
            <button onclick="UE.getEditor('editor').focus()">使编辑器获得焦点</button>
            <button onmousedown="isFocus()">编辑器是否获得焦点</button>
            <button onmousedown="setBlur()">编辑器失去焦点</button>
            <button onclick="getSelectText()">获得当前选中的文本</button>
            <button onclick="UE.getEditor('editor').execCommand('insertHtml', '插入的内容')">插入内容</button>
            <button onclick="UE.getEditor('editor').setEnabled()">设定可编辑</button>
            <button onclick="UE.getEditor('editor').setDisabled('fullscreen')">设定不可编辑</button>
            <button onclick="UE.getEditor('editor').setHide()">隐藏编辑器</button>
            <button onclick="UE.getEditor('editor').setShow()">显示编辑器</button>
            <button onclick="UE.getEditor('editor').setHeight(300)">设置固定高度</button>
            <button onclick="UE.getEditor('editor')">创建编辑器</button>
            <button onclick="UE.getEditor('editor').destroy()">销毁编辑器</button>
            <button onclick="alert( UE.getEditor('editor').execCommand('get_auto_save_content') )">草稿箱-获取</button>
            <button onclick="UE.getEditor('editor').execCommand('clear_auto_save_content'); alert('已清空草稿箱')">草稿箱-清空
            </button>
            <button onclick="UE.getEditor('editor').execCommand('set_auto_save_content'); alert('已保存')">草稿箱-立即保存
            </button>
            <button onclick="UE.getEditor('editor').execCommand('auto_save_restore')">草稿箱-恢复到编辑器</button>
        </div>
    </div>

    <script type="text/javascript">
        var ue = UE.getEditor('editor',{
            autoHeightEnabled: false,
            retainOnlyLabelPasted: true,
            maximumWords: 10000, // 关闭字数限制
            wordWrap: true,
        });
        ue.on('contentchange', function () {
            // console.log('contentchange', ue.getContent());
        });

        function isFocus(e) {
            alert(UE.getEditor('editor').isFocus());
            UE.dom.domUtils.preventDefault(e)
        }

        function setBlur(e) {
            UE.getEditor('editor').blur();
            UE.dom.domUtils.preventDefault(e)
        }

        function getSelectText() {
            var range = UE.getEditor('editor').selection.getRange();
            range.select();
            var txt = UE.getEditor('editor').selection.getText();
            alert(txt)
        }
    </script>
</div>
</body>
</html>
